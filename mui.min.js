!function($,undefined){$.mui=$.mui||{},$.mui&&($.extend($.mui,{slider:{inits:0,items:1,moveby:1,speed:500,width:1200,height:300,item_margin:0,duration:3e3,direction:"h",nav:"dots",navcontrol:!0,theme:"a",navcontrolimage:{back:"",forward:""},fullwidth:!1,navposleft:0,navposRange:0,lang:{forward:"下一张",back:"上一张"}}}),$.fn.mui_slider=function(o){var t=o.obj||this;if(t!=undefined){if($(t).find("[slider]").each(function(o,t){var i=$(t)||undefined;i!=undefined&&(i.attr("slider-inited")||(i.attr({"slider-inited":!0,"slider-index":$.mui.slider.inits}).unbind().mui_slider_create(),$.mui.slider.inits++))}),$.type("function"==o.callback))try{o.callback()}catch(i){console.log(i)}return t}},$.fn.mui_slider_create=function(){var o={obj:$(this)};if(0!=o.obj.length){if(o.theme=o.obj.attr("slider")||$.mui.slider.theme,o.width=parseInt(o.obj.attr("slider-width"))||$.mui.slider.width,o.height=parseInt(o.obj.attr("slider-height"))||$.mui.slider.height,o.items=parseInt(o.obj.attr("slider-items"))||$.mui.slider.items,o.moveby=parseInt(o.obj.attr("slider-moveby"))||$.mui.slider.moveby,o.direction=o.obj.attr("slider-direction")||$.mui.slider.direction,o.item_margin=parseInt(o.obj.attr("slider-item-margin"))||$.mui.slider.item_margin,o.speed=parseInt(o.obj.attr("slider-speed"))||$.mui.slider.speed,o.duration=parseInt(o.obj.attr("slider-duration"))||$.mui.slider.duration,o.nav=o.obj.attr("slider-nav")||$.mui.slider.nav,o.navcontrol=o.obj.attr("slider-navcontrol")||$.mui.slider.navcontrol,o.fullwidth=o.obj.attr("slider-fullwidth")||$.mui.slider.fullwidth,o.navcontrolimage=$.mui.slider.navcontrolimage,o.obj.attr("slider-navcontrolimage")&&eval("o.navcontrolimage = "+o.obj.attr("slider-navcontrolimage")),o.navposleft=parseInt(o.obj.attr("slider-navposleft"))||$.mui.slider.navposleft,o.navposRange=parseInt(o.obj.attr("slider-navposRange"))||$.mui.slider.navposRange,o.lang=$.mui.slider.lang,o.obj.attr("slider-lang")&&eval("o.lang = "+o.obj.attr("slider-lang")),o.intervalEvent=undefined,o.clickEvent=undefined,o.intervalCallback=undefined,o.clickCallback=undefined,o.timeoutEvent=undefined,o.group_width=o.width,o.item_width=o.group_width/o.items,o.total_items=o.obj.children("div").length,o.total_groups=o.total_items/o.items,o.obj.addClass("mui-slider-content").css({width:o.total_groups*o.group_width+"px"}),o.obj.wrap('<div class="mui-slider-wrapper '+o.theme+" "+o.direction+'">'),o.outer=o.obj.parent(".mui-slider-wrapper"),o.outer.css({height:o.height+"px",width:o.width+"px"}),o.total_items%o.items!=0)return void console.log("can not cut into groups , add more items");o.obj.children("div").each(function(t,i){$(i).attr("slider-item-index",t).addClass("mui-slider-item").css({width:o.item_width,height:o.height})});for(var cur=0,i=0;i<o.total_groups;i++)o.obj.find(".mui-slider-item").slice(cur,cur+o.items).wrapAll('<div class="mui-slider-group" group-index="'+i+'"></div>'),cur+=o.items;if(o.obj.find(".mui-slider-item").find("[caption]").addClass("mui-slider-caption"),o.obj.find(".mui-slider-item").each(function(t,i){var e=$(i).children("a").attr("src");$(i).children("a").addClass("mui-slider-item-image").css({background:"url("+e+") top center no-repeat",height:o.height+"px",width:o.item_width+"px"})}),o.navcontrol&&(o.navposleft=parseInt(o.obj.attr("slider-navposleft"))||$.mui.slider.navposleft,o.navposRange=parseInt(o.obj.attr("slider-navposRange"))||o.group_width,o.outer.append('<div class="mui-slider-navcontrol-back" to-group="'+(o.total_groups-1)+'"></div>').append('<div class="mui-slider-navcontrol-forward" to-group="1"></div>'),o.outer.find(".mui-slider-navcontrol-back").css({left:o.navposleft+"px",top:o.height/2-o.outer.find(".mui-slider-navcontrol-back").outerHeight(!0)/2+"px"}),o.outer.find(".mui-slider-navcontrol-forward").css({left:o.navposleft+o.navposRange-o.outer.find(".mui-slider-navcontrol-forward").outerWidth(!0)+"px",top:o.height/2-o.outer.find(".mui-slider-navcontrol-forward").outerHeight(!0)/2+"px"})),o.nav&&("thumb"==o.nav,"dots"==o.nav)){for(var dotsDom='<div class="mui-slider-dots-wrapper">',i=0;i<o.total_groups;i++)dotsDom+='<div class="mui-slider-dots-item" to-group="'+i+'"></div>';dotsDom+="</div>",o.outer.append(dotsDom),o.outer.find(".mui-slider-dots-wrapper").css({bottom:"10px",left:o.navposleft+o.navposRange/2-o.outer.find(".mui-slider-dots-wrapper").outerWidth(!0)/2+"px"})}return o.fullwidth&&o.outer.css({overflow:"visible"}),o.obj.mui_slider_events(o),o.obj}},$.fn.mui_slider_events=function(o){o.obj.data({slideInterval:function(t){if(o.intervalEvent==undefined){{var i=0;o.total_groups-1}o.intervalEvent=setInterval(function(){var t=o.group_width;o.obj.animate({left:"-"+i*t+"px"},o.speed),o.obj.data("updateStatus")(i),i+1==o.total_groups?i=0:i+=1},o.duration);try{t(o)}catch(e){console.log(e)}}},slide:function(t,i){clearInterval(o.intervalEvent),o.intervalEvent=undefined,clearTimeout(o.timeoutEvent),o.timeoutEvent=undefined;var e=parseInt(t.attr("to-group")),r=o.group_width;o.obj.animate({left:"-"+e*r+"px"},o.speed),o.obj.data("updateStatus")(e),o.timeoutEvent=setTimeout(function(){o.obj.data("slideInterval")(function(){console.log("im in timeout")})},5e3);try{i(o)}catch(n){console.log(n)}},updateStatus:function(t){var i=o.outer.find(".mui-slider-navcontrol-back"),e=o.outer.find(".mui-slider-navcontrol-forward"),r=t-1,n=t+1;0>r&&(r=o.total_groups-1),n==o.total_groups&&(n=0),i.attr("to-group",r),e.attr("to-group",n),o.outer.find(".mui-slider-dots-item").css({backgroundColor:"#000"}).each(function(o,i){$(i).attr("to-group")==t&&$(i).css({backgroundColor:"#0082f0"})})}}),o.obj.data("slideInterval")(function(){console.log("im callback interval")});var t=o.outer.find("[to-group]");return t.click(function(){o.obj.data("slide")($(this),function(){console.log("im callback click slide")})}),o.obj},$(document).ready(function(){if("function"==$.type($(this).mui_slider))try{$(this).mui_slider({callback:function(){console.log("im done after everything")}})}catch(o){console.log(o)}}))}(jQuery);