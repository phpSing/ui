!function($,undefined){function escQuit(){var o=["[mui-dialog-ref]",".mui-dialog-mask"];$(document).keyup(function(i){27==i.keyCode&&$.each(o,function(o,i){$(i).remove()})})}function draggable(o,i){var t=$(i),o=o;t.length<1||o.length<1||t.unbind("mousedown").mousedown(function(i){var e={};e._x=i.clientX,e._y=i.clientY,e.drag_x=o.offset().left,e.drag_y=o.offset().top,t.unbind("mousemove").mousemove(function(i){e.xdiff=i.clientX-e._x,e.ydiff=i.clientY-e._y;var t=e.drag_x+e.xdiff,a=e.drag_y+e.ydiff;o.offset({top:a,left:t})}),t.mouseup(function(){t.unbind("mousemove")})})}$.mui=$.mui||{},$.mui&&($.extend($.mui,{slider:{inits:0,items:1,moveby:1,speed:500,width:1200,height:300,item_margin:0,duration:3e3,direction:"h",nav:"dots",navcontrol:!0,theme:"a",navcontrolimage:{back:"",forward:""},fullwidth:!1,navposleft:0,navposRange:0,lang:{forward:"下一张",back:"上一张"}}}),$.fn.mui_slider=function(o){var i=o.obj||this;if(i!=undefined){if($(i).find("[slider]").each(function(o,i){var t=$(i)||undefined;t!=undefined&&(t.attr("slider-inited")||(t.attr({"slider-inited":!0,"slider-index":$.mui.slider.inits}).unbind().mui_slider_create(),$.mui.slider.inits++))}),$.type("function"==o.callback))try{o.callback(i)}catch(t){console.log(t)}return i}},$.fn.mui_slider_create=function(){var o={obj:$(this)};if(0!=o.obj.length){if(o.theme=o.obj.attr("slider")||$.mui.slider.theme,o.width=parseInt(o.obj.attr("slider-width"))||$.mui.slider.width,o.height=parseInt(o.obj.attr("slider-height"))||$.mui.slider.height,o.items=parseInt(o.obj.attr("slider-items"))||$.mui.slider.items,o.moveby=parseInt(o.obj.attr("slider-moveby"))||$.mui.slider.moveby,o.direction=o.obj.attr("slider-direction")||$.mui.slider.direction,o.item_margin=parseInt(o.obj.attr("slider-item-margin"))||$.mui.slider.item_margin,o.speed=parseInt(o.obj.attr("slider-speed"))||$.mui.slider.speed,o.duration=parseInt(o.obj.attr("slider-duration"))||$.mui.slider.duration,o.nav=o.obj.attr("slider-nav")||$.mui.slider.nav,o.navcontrol=o.obj.attr("slider-navcontrol")||$.mui.slider.navcontrol,o.fullwidth=o.obj.attr("slider-fullwidth")||$.mui.slider.fullwidth,o.navcontrolimage=$.mui.slider.navcontrolimage,o.obj.attr("slider-navcontrolimage")&&eval("o.navcontrolimage = "+o.obj.attr("slider-navcontrolimage")),o.navposleft=parseInt(o.obj.attr("slider-navposleft"))||$.mui.slider.navposleft,o.navposRange=parseInt(o.obj.attr("slider-navposRange"))||$.mui.slider.navposRange,o.lang=$.mui.slider.lang,o.obj.attr("slider-lang")&&eval("o.lang = "+o.obj.attr("slider-lang")),o.intervalEvent=undefined,o.clickEvent=undefined,o.intervalCallback=undefined,o.clickCallback=undefined,o.timeoutEvent=undefined,o.group_width=o.width,o.item_width=o.group_width/o.items,o.total_items=o.obj.children("div").length,o.total_groups=o.total_items/o.items,o.obj.addClass("mui-slider-content").css({width:o.total_groups*o.group_width+"px"}),o.obj.wrap('<div class="mui-slider-wrapper '+o.theme+" "+o.direction+'">'),o.outer=o.obj.parent(".mui-slider-wrapper"),o.outer.css({height:o.height+"px",width:o.width+"px"}),o.total_items%o.items!=0)return void console.log("can not cut into groups , add more items");o.obj.children("div").each(function(i,t){$(t).attr("slider-item-index",i).addClass("mui-slider-item").css({width:o.item_width,height:o.height})});for(var cur=0,i=0;i<o.total_groups;i++)o.obj.find(".mui-slider-item").slice(cur,cur+o.items).wrapAll('<div class="mui-slider-group" group-index="'+i+'"></div>'),cur+=o.items;if(o.obj.find(".mui-slider-item").find("[caption]").addClass("mui-slider-caption"),o.obj.find(".mui-slider-item").each(function(i,t){var e=$(t).children("a").attr("src");$(t).children("a").addClass("mui-slider-item-image").css({background:"url("+e+") top center no-repeat",height:o.height+"px",width:o.item_width+"px"})}),o.navcontrol&&(o.navposleft=parseInt(o.obj.attr("slider-navposleft"))||$.mui.slider.navposleft,o.navposRange=parseInt(o.obj.attr("slider-navposRange"))||o.group_width,o.outer.append('<div class="mui-slider-navcontrol-back" to-group="'+(o.total_groups-1)+'"></div>').append('<div class="mui-slider-navcontrol-forward" to-group="1"></div>'),o.outer.find(".mui-slider-navcontrol-back").css({left:o.navposleft+"px",top:o.height/2-o.outer.find(".mui-slider-navcontrol-back").outerHeight(!0)/2+"px"}),o.outer.find(".mui-slider-navcontrol-forward").css({left:o.navposleft+o.navposRange-o.outer.find(".mui-slider-navcontrol-forward").outerWidth(!0)+"px",top:o.height/2-o.outer.find(".mui-slider-navcontrol-forward").outerHeight(!0)/2+"px"})),o.nav&&("thumb"==o.nav,"dots"==o.nav)){for(var dotsDom='<div class="mui-slider-dots-wrapper">',i=0;i<o.total_groups;i++)dotsDom+='<div class="mui-slider-dots-item" to-group="'+i+'"></div>';dotsDom+="</div>",o.outer.append(dotsDom),o.outer.find(".mui-slider-dots-wrapper").css({bottom:"10px",left:o.navposleft+o.navposRange/2-o.outer.find(".mui-slider-dots-wrapper").outerWidth(!0)/2+"px"})}return o.obj.mui_slider_events(o),o.obj}},$.fn.mui_slider_events=function(o){o.obj.data({pause:function(i){clearInterval(o.intervalEvent),o.intervalEvent=undefined;try{i(o)}catch(t){console.log(t)}},slideInterval:function(i){if(o.intervalEvent==undefined){{var t=0;o.total_groups-1}o.intervalEvent=setInterval(function(){o.slideBaseRange=o.group_width,o.obj.animate({left:"-"+t*o.slideBaseRange+"px"},o.speed),o.obj.data("updateStatus")(t),t+1==o.total_groups?t=0:t+=1},o.duration);try{i(o)}catch(e){console.log(e)}}},slide:function(i,t){clearInterval(o.intervalEvent),o.intervalEvent=undefined,clearTimeout(o.timeoutEvent),o.timeoutEvent=undefined;var e=parseInt(i.attr("to-group"));o.slideBaseRange=o.group_width,o.obj.animate({left:"-"+e*o.slideBaseRange+"px"},o.speed),o.obj.data("updateStatus")(e),o.timeoutEvent=setTimeout(function(){o.obj.data("slideInterval")(function(){console.log("im in timeout")})},5e3);try{t(o)}catch(a){console.log(a)}},updateStatus:function(i){var t=o.outer.find(".mui-slider-navcontrol-back"),e=o.outer.find(".mui-slider-navcontrol-forward"),a=i-1,n=i+1;0>a&&(a=o.total_groups-1),n==o.total_groups&&(n=0),t.attr("to-group",a),e.attr("to-group",n),o.outer.find(".mui-slider-dots-item").css({backgroundColor:"#000"}).each(function(o,t){$(t).attr("to-group")==i&&$(t).css({backgroundColor:"#0082f0"})})}}),o.obj.data("slideInterval")(function(){console.log("im callback interval")});var i=o.outer.find("[to-group]");i.click(function(){o.obj.data("slide")($(this),function(){console.log("im callback click slide")})});var t=o.outer.find(".mui-slider-item");return t.hover(function(){o.obj.data("pause")()},function(){o.obj.data("slideInterval")()}),o.obj},$.extend($.mui,{dialog:{target:"mui-dialog-ref",unique:!0,width:"auto",height:"auto",title:"",selector:"",data:{},speed:500,lang:{close:"关闭",open:"打开"}}}),$.fn.mui_dialog=function(o){console.log("in dialog");var i=o.obj||this;if(i!=undefined){if($(i).find("[dialog]").each(function(o,i){var t=$(i);t.length<1||t.attr("dialog-inited")||(t.attr({"dialog-inited":"true","dialog-target":$.mui.dialog.target}),t.unbind().mui_dialoginit())}),"function"==$.type(o.callback))try{o.callback(i)}catch(t){console.log(t)}return i}},$.fn.mui_dialoginit=function(){var o={obj:$(this)};if(!(o.obj.length<0))return o.theme=o.obj.attr("dialog")||"a",o.selector=o.obj.attr("dialog-selector")||$.mui.dialog.selector,eval("o.dialog_data = "+o.obj.attr("dialog-data")),o.width=o.obj.attr("dialog-width")||$.mui.dialog.width,o.height=o.obj.attr("dialog-height")||$.mui.dialog.height,o.title=o.obj.attr("dialog-title")||$.mui.dialog.title,o.dataurl=o.obj.attr("href"),o.maxwidth=.8*$(window).width(),o.maxheight=.8*$(window).height(),o.opentimes=0,console.log(o.maxheight),o.windowwidth=$(window).width(),o.dialog_mask='<div class="mui-dialog-mask"></div>',"auto"!=o.width&&(o.width+="px"),"auto"!=o.height&&(o.height+="px"),o.dialog_box='<div class="mui-dialog-wrapper" '+$.mui.dialog.target+">",""!=o.title&&(o.dialog_box+='<div class="mui-dialog-title">'+o.title+'<span class="mui-dialog-close"></span></div>'),o.dialog_box+='<div class="mui-dialog-body"><div class="icon-loading"></div></div>',o.dialog_box+="</div>",o.obj.mui_dialogevents(o),o.obj},$.fn.mui_dialogevents=function(o){console.log("into events dialog"),o.dialog_box=$(o.dialog_box),o.dialog_mask=$(o.dialog_mask),o.obj.data({pos:function(){o.dialog_box.outerHeight(!0)>o.maxheight&&o.dialog_box.height(o.maxheight),o.dialog_box.outerWidth(!0)>o.maxwidth&&o.dialog_box.width(o.maxwidth);var i=(o.windowwidth-o.dialog_box.outerWidth(!0))/2;console.log(o.windowwidth+"    "+o.dialog_box.outerWidth(!0)+"  .  "+i),o.dialog_box.css({left:i+"px"}),draggable(o.dialog_box,".mui-dialog-title")},open:function(i){if($("[mui-dialog-ref]").length<1)if($("body").append(o.dialog_mask).append(o.dialog_box),o.dialog_box.hide().fadeIn(200),o.dialog_box.find(".mui-dialog-close").unbind().click(function(){o.obj.data("close")(function(){console.log("im after dialog close")})}),o.dialog_box.bind("transitionend",function(){console.log("trans")}),""!=o.selector){var t=$(o.selector).html();o.dialog_box.find(".mui-dialog-body").html(t),o.obj.data("pos")()}else o.dataurl&&$.post(o.dataurl,o.dialog_data,function(i){o.dialog_box.find(".mui-dialog-body").html(i),o.obj.data("pos")()});if(console.log(o.opentimes),o.opentimes+=1,"function"==$.type(i))try{i(o)}catch(e){console.log(e)}},close:function(i){if(o.dialog_box.remove(),o.dialog_mask.remove(),"function"==$.type(i))try{i(o)}catch(t){console.log(t)}}}),o.obj.unbind().click(function(i){i.preventDefault(),o.obj.data("open")(function(){console.log("im running after open")})})},$(document).ready(function(){if(escQuit(),"function"==$.type($(this).mui_slider))try{$(this).mui_slider({callback:function(){console.log("im done after everything")}})}catch(o){console.log(o)}if("function"==$.type($(this).mui_dialog))try{$(this).mui_dialog({callback:function(){console.log("im done after everything")}})}catch(o){console.log(o)}}))}(jQuery);